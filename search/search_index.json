{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<ul> <li>Documentation: https://fernandocelmer.github.io/api-proxy/</li> <li>Source Code: https://github.com/FernandoCelmer/api-proxy</li> </ul>"},{"location":"#contexto-do-projeto","title":"Contexto do Projeto","text":"<p>Uma empresa possui atualmente +30.000 servidores onde suas aplica\u00e7\u00f5es s\u00e3o executadas. Elas comunicam-se entre si atrav\u00e9s de <code>APIs</code>, sendo que algumas possuem ainda acesso externo (api.empresa.com).</p>"},{"location":"#problema","title":"Problema","text":"<p>Um dos problemas \u00e9 a dificuldade para medir e controlar interconex\u00f5es entre as <code>APIs</code>.</p>"},{"location":"#solucao","title":"Solu\u00e7\u00e3o","text":"<p>Implementa\u00e7\u00e3o de um <code>proxy de apis</code> com os seguintes requisitos:</p> <ul> <li>Executar a fun\u00e7\u00e3o de proxy sobre o dom\u00ednio api.empresa.com, isto \u00e9, ele deve agir como um intermedi\u00e1rio para as requisi\u00e7\u00f5es dos clientes, enviando-as \u00e0 api.empresa.com.</li> <li>Dever\u00e1 permitir o controle das quantidades m\u00e1ximas de requisi\u00e7\u00f5es por:<ul> <li>IP de origem</li> <li>Path de destino</li> <li>Combina\u00e7\u00f5es de ambos</li> </ul> </li> <li>Deve armazenar (e tamb\u00e9m permitir que se consulte) as estat\u00edsticas de uso do proxy.</li> <li>O proxy (como solu\u00e7\u00e3o) dever\u00e1 poder superar 50.000 requisi\u00e7\u00f5es por segundo.</li> </ul>"},{"location":"#commit-style","title":"Commit Style","text":"<ul> <li>\u2699\ufe0f FEATURE</li> <li>\ud83d\udcdd PEP8</li> <li>\ud83d\udccc ISSUE</li> <li>\ud83e\udeb2 BUG</li> <li>\ud83d\udcd8 DOCS</li> <li>\ud83d\udce6 PyPI</li> <li>\u2764\ufe0f\ufe0f TEST</li> <li>\u2b06\ufe0f CI/CD</li> <li>\u26a0\ufe0f SECURITY</li> </ul>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the terms of the MIT license.</p>"},{"location":"nav/api/swagger/","title":"Swagger","text":"<p>O Swagger \u00e9, basicamente, um conjunto de ferramentas que nos ajuda a fazer o design, ou seja, fazer a modelagem, a documentar e at\u00e9 gerar c\u00f3digo para desenvolvimento de APIs.</p>"},{"location":"nav/api/swagger/#painel","title":"Painel","text":"<ul> <li>Link: http://127.0.0.1:8000/docs</li> </ul>"},{"location":"nav/monitoring/prometheus/","title":"Prometheus","text":"<p>O Prometheus coleta e armazena suas m\u00e9tricas como dados de s\u00e9ries temporais, ou seja, as informa\u00e7\u00f5es das m\u00e9tricas s\u00e3o armazenadas com o carimbo de data/hora em que foram registradas, juntamente com pares chave-valor opcionais chamados r\u00f3tulos.</p>"},{"location":"nav/monitoring/prometheus/#painel","title":"Painel","text":"<ul> <li>Link: http://127.0.0.1:9090/</li> </ul>"},{"location":"nav/monitoring/prometheus/#configuracoes","title":"Configura\u00e7\u00f5es","text":""},{"location":"nav/monitoring/prometheus/#importacao","title":"Importa\u00e7\u00e3o","text":"<p>Importar a classe Counter. Utilizada para realizar a contagem de acessos em determinado endpoint da API.</p> <pre><code>from prometheus_client import Counter\n</code></pre>"},{"location":"nav/monitoring/prometheus/#criacao-funcao","title":"Cria\u00e7\u00e3o Fun\u00e7\u00e3o","text":"<p>Criar e especificar uma m\u00e9trica, que ser\u00e1 usado de controle para consulta no painel do Prometheus.</p> <pre><code>metric_hello_world = Counter('v1_metric_hello_world', 'API', ['method'])\n</code></pre>"},{"location":"nav/monitoring/prometheus/#utilizacao","title":"Utiliza\u00e7\u00e3o","text":"<p>Incluir essa m\u00e9trica no endpoint.</p> <pre><code>@app.get(\"/\")\nasync def root():\n    metric_hello_world.labels(method=\"GET\").inc()\n    return {\"message\": \"Hello World\"}\n</code></pre>"},{"location":"nav/monitoring/prometheus/#filtro","title":"Filtro","text":"<pre><code>get_total{job=\"proxy-api\", client=\"172.16.238.1\"}\n</code></pre>"},{"location":"nav/settings/environment-variables/","title":"Variaveis de Ambiente","text":""},{"location":"nav/settings/environment-variables/#resumo","title":"Resumo","text":"<p>Como o pr\u00f3prio nome j\u00e1 diz uma vari\u00e1vel de ambiente \u00e9 uma vari\u00e1vel que existe no contexto do seu projeto, ou seja, se eu criar uma vari\u00e1vel de ambiente no meu computador ele n\u00e3o vai aparecer no seu computador.</p> <p>OBS: E principalmente n\u00e3o pode enviado para o reposit\u00f3rio do projeto, deve ser adicionado no projeto o mesmo ser executado em desenvolvimento, homologa\u00e7\u00e3o ou produ\u00e7\u00e3o.</p>"},{"location":"nav/settings/environment-variables/#criacao-variavel","title":"Cria\u00e7\u00e3o Vari\u00e1vel","text":"<p>Para criar as vari\u00e1veis de ambiente em seu projeto basta seguir o modelo de arquivo, disponibilizado na raiz do projeto chamado <code>.env-exemple</code>.</p> <p>Instru\u00e7\u00f5es:</p> <ul> <li>Copie o arquivo <code>.env-exemple</code></li> <li>Renomeia a c\u00f3pia de <code>.env-exemple-copy</code> para <code>.env</code></li> <li>Edite o arquivo <code>.env</code> com as informa\u00e7\u00f5es necess\u00e1rias</li> </ul>"},{"location":"nav/settings/environment-variables/#variaveis-proxy","title":"Vari\u00e1veis -&gt; proxy","text":""},{"location":"nav/settings/environment-variables/#lista-de-variaveis","title":"Lista de Vari\u00e1veis","text":"NOME Tipo Valor Exemplo DEBUG Integer 0 - 1 ENVIRONMENT String development - sandbox - production PROXY String ./proxy/data/proxy.json USERS String ./proxy/data/users.json URL_PROYX String http://127.0.0.1:8000 URL_PROMETHEUS String http://127.0.0.1:9090"},{"location":"nav/settings/environment-variables/#variaveis-prometheus","title":"Vari\u00e1veis -&gt; prometheus","text":""},{"location":"nav/settings/environment-variables/#lista-de-variaveis_1","title":"Lista de Vari\u00e1veis","text":"NOME Tipo Valor Exemplo"},{"location":"nav/settings/python-virtual-environment/","title":"Ambiente Virtual Python","text":""},{"location":"nav/settings/python-virtual-environment/#resumo","title":"Resumo","text":"<p>Um ambiente virtual \u00e9 uma maneira de voc\u00ea manter c\u00f3pias em uma pasta local seu interpretador Python. Dessa forma voc\u00ea pode instalar novos pacotes de Python em pastas espec\u00edficas e remov\u00ea-los facilmente apenas excluindo.</p>"},{"location":"nav/settings/python-virtual-environment/#criacao-ambiente","title":"Cria\u00e7\u00e3o Ambiente","text":"<ul> <li>Criar um novo ambiente virtual <pre><code>python -m venv venv\n</code></pre></li> <li>Ativando o ambiente virtual <pre><code>source venv/bin/activate\n</code></pre></li> </ul>"}]}